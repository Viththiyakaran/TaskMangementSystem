<main id="main" class="main">
  <div class="pagetitle">
    <h1>Data Tables</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
        <li class="breadcrumb-item">Tables</li>
        <li class="breadcrumb-item active">Data</li>
      </ol>
    </nav>
  </div>
  <section class="section">
    <div class="row">
      <div class="col-lg-6">
        <a routerLink="/task-management" class="btn btn-primary m-2" style="visibility: hidden;">Back To Task</a>

        <div class="card">
          <div class="card-body">
            <div>
              <h5 class="card-title">Chatting Bot</h5>
              <div *ngIf="task && task.length > 0">
                <div class="chat-bubble">
                  <div class="user-message">
                    <p>Task ID: {{ task[0].ticketId }}</p>
                    <p>Call Type: {{ task[0].callType }}</p>
                    <p>Business Type: {{ task[0].businessType }}</p>
                    <p>Business ID: {{ task[0].businessId }}</p>
                    <p>Business Name: {{ task[0].businessName }}</p>
                    <p>Service Type: {{ task[0].serviceType }}</p>
                    <p>Open Date: {{ task[0].openDate }}</p>
                    <p>Open By: {{ task[0].openBy }}</p>
                    <p>Assigned To: {{ task[0].assignedTo }}</p>
                    <p>Assigned Name: {{ task[0].assignedName }}</p>
                    <p>Appointment Date: {{ task[0].appointmentDate }}</p>
                    <p>Appointment Type: {{ task[0].appointmentType }}</p>
                    <p>Status: {{ task[0].status }}</p>
                    <p>Last Update: {{ task[0].lastUpdate }}</p>
                    <p>Closed Date: {{ task[0].closedDate }}</p>
                    <p>Closed By: {{ task[0].closedBy }}</p>
                    <p>Initial Note: {{ task[0].initialNote }}</p>
                    <p>CL Customer ID: {{ task[0].clCustomerId }}</p>
                  </div>

                  <div class="form-group">
                    <label for="quillEditor">Editor</label>
                    <ckeditor [(ngModel)]="editorContent"></ckeditor>
                  </div>


                 </div>
                </div>
              </div>
            </div>
          </div>
      </div>
      <div class="col-lg-6">
        <a routerLink="/task-managment" class="btn btn-primary m-2" style="visibility: hidden;">Back To Task</a>

        <div class="card">
          <div class="card-body">
            <div *ngIf="taskForm">
              <h5 class="card-title">Create the task</h5>
              <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                  <label for="businessId">Business ID</label>
                  <select class="form-control" id="businessId" formControlName="businessId" (change)="onBusinessIdSelected($event)" >
                    <option *ngFor="let option of businessArray" [value]="option.businessId">{{ option.businessId }} - {{ option.busName }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="callType">Call Type</label>
                  <select class="form-control" id="callType" formControlName="callType" [(ngModel)]="task[0].callType">
                    <option  [value]=" task[0].callType">{{ task[0].callType }}</option>
                    <option value="Support">Support</option>
                    <option value="Development">Development</option>
                    <option value="Sales">Sales</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="serviceType">Service Type</label>
                  <select class="form-control" id="serviceType" formControlName="serviceType" [(ngModel)]="task[0].serviceType">
                    <option  [value]=" task[0].serviceType">{{ task[0].serviceType }}</option>
                    <option value="ePOS">ePOS</option>
                    <option value="Hospitality">Hospitality</option>
                    <option value="CCTV">CCTV</option>
                    <option value="Alarm">Alarm</option>
                    <option value="Light">Light</option>
                  </select>
                </div>
                <!-- <div class="form-group">
                  <label for="openBy">Open By</label>
                  <select class="form-control" id="openBy" formControlName="openBy" (change)="onOpenBySelected($event)">
                    <option value="">Select the support engineer</option>
                    <option *ngFor="let user of userArray" [value]="user.userId">{{ user.userId }} - {{ user.name }}</option>
                  </select>
                </div> -->
                <div class="form-group">
                  <label for="assignedTo">Assigned To</label>
                  <select class="form-control" id="assignedTo" formControlName="assignedTo" (change)="onAssignedToSelected($event)" [(ngModel)]="task[0].assignedName">
                    <option  [value]=" task[0].assignedTo">{{ task[0].assignedTo }} - {{ task[0].assignedName }}</option>
                    <option *ngFor="let user of userArray2" [value]="user.userId">{{ user.userId }} - {{ user.name }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="appointmentDate">Appointment Date</label>
                  <input type="datetime-local" class="form-control" id="appointmentDate" formControlName="appointmentDate" [(ngModel)]="task[0].appointmentDate">
                </div>
                <div class="form-group">
                  <label for="appointmentType">Appointment Type</label>
                  <select class="form-control" id="appointmentType" formControlName="appointmentType" [(ngModel)]="task[0].appointmentType">
                    <option  [value]="task[0].appointmentType">{{ task[0].appointmentType }} </option>
                    <option value="No Appointment">No Appointment</option>
                    <option value="E-Mail">E-Mail</option>
                    <option value="Talk">Talk</option>
                    <option value="Site Survey">Site Survey</option>
                    <option value="Installation">Installation</option>
                    <option value="Troubleshoot">Troubleshoot</option>
                    <option value="Repair">Repair</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="status">Status</label>
                  <select class="form-control" id="status" formControlName="status" [(ngModel)]="task[0].status">
                    <option  [value]="task[0].status">{{ task[0].status }} </option>
                    <option value="pending">Pending</option>
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                  </select>
                </div>
                <!-- <div class="form-group">
                  <label for="lastUpdate">Last Update</label>
                  <input type="datetime-local" class="form-control" id="lastUpdate" formControlName="lastUpdate">
                </div> -->
                <div class="form-group">
                  <label for="closedDate">Closed Date</label>
                  <input type="datetime-local" class="form-control" id="closedDate" formControlName="closedDate">
                </div>
                <div class="form-group">
                  <label for="closedBy">Closed By</label>
                  <select class="form-control" id="closedBy" formControlName="closedBy" (change)="onClosedBySelected($event)">
                    <option value="">Select the support engineer</option>
                    <option *ngFor="let user of userArray3" [value]="user.userId">{{ user.userId }} - {{ user.name }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="initialNote">Initial Note</label>
                  <div class="form-group">
                    <ckeditor [(ngModel)]="task[0].initialNote" id="initialNote" formControlName="initialNote"></ckeditor>
                  </div>
                </div>

                <div class="row mt-3">
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
              </form>
            </div>
          </div>

          <div class="alert alert-success bg-success text-light border-0 alert-dismissible fade show" *ngIf="isSuccess" role="alert"> A simple success alert with solid colorâ€”check it out! {{ticketIdAlert}}
             <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button></div>
        </div>
      </div>
    </div>
  </section>
</main>
